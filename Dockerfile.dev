# Development Dockerfile with hot reload support
FROM node:20-alpine

# Set environment variables
ENV NODE_ENV=development

# Install development dependencies
RUN apk add --no-cache git

# Set working directory
WORKDIR /app

# Copy package files
COPY package.json yarn.lock .yarnrc.yml ./
COPY .yarn ./.yarn

# Install dependencies (including dev dependencies)
RUN corepack enable && \
    yarn install --immutable

# Copy TypeScript config
COPY tsconfig.json ./

# Expose default port
EXPOSE 3000

# Keep container running for development
# Source code will be mounted as volume
CMD ["tail", "-f", "/dev/null"]
